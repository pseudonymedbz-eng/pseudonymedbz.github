<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Steal the Brainrot - Fortnite</title>
<style>
body{
  margin:0; padding:0; font-family:Arial,sans-serif;
  background-image: url('TON_IMAGE_DE_FOND_URL_ICI');
  background-size: cover; background-position:center; background-attachment:fixed;
  color:#fff;
}
.content{
  background-color: rgba(10,10,25,0.85);
  min-height:100vh; padding:25px; box-sizing:border-box;
}
h1,h2{color:#00ffff;}
.comment-section, .code-container, .map-status, #adminLogin{
  background: rgba(30,30,50,0.9); border:2px solid #00ffff; padding:20px; border-radius:12px; margin:20px 0;
}
input, textarea, button{width:100%; padding:10px; margin-top:5px; border-radius:8px; border:none;}
button{background:#00ffff; color:#000; font-weight:bold; cursor:pointer;}
.delete-btn{background:#ff4444;color:#fff;border:none;padding:5px 10px;border-radius:5px;cursor:pointer;margin-top:5px;}
.comment{background: rgba(255,255,255,0.1); padding:10px; border-radius:8px; margin-bottom:10px;}
#brainrot-emoji{
  position: fixed; bottom: 20px; right: 20px; font-size: 36px;
  cursor: pointer; padding: 10px; background: rgba(0,0,0,0.3); border-radius: 50%; z-index: 9999;
}
#brainrot-emoji:hover{transform:scale(1.2);}
.annonce {background-color: rgba(255,0,0,0.1); padding:10px; margin-bottom:10px; border-left:4px solid red;}
</style>
</head>
<body>
<div class="content">
  <h1>Steal the Brainrot - Fortnite</h1>

  <!-- HISTORIQUE ANNONCES -->
  <div id="annoncesDiv"></div>

  <h2>üí¨ Commentaires des joueurs</h2>
  <div class="comment-section">
    <div id="comments"></div>
    <input id="username" placeholder="Ton pseudo">
    <textarea id="message" placeholder="Ton message..."></textarea>
    <button onclick="addComment()">Envoyer</button>
  </div>

  <!-- ADMIN -->
  <div id="adminLogin" style="display:none;" class="comment-section">
    <h3>üîê Espace Admin</h3>
    <div id="adminComments"></div>
    <h3>üì¢ Cr√©er une annonce</h3>
    <input id="annTitle" placeholder="Titre de l'annonce">
    <textarea id="annMsg" placeholder="Message de l'annonce"></textarea>
    <input id="annCountdown" type="number" placeholder="Dur√©e en secondes">
    <button id="publishAnnonce">Publier annonce</button>
  </div>
</div>

<div id="brainrot-emoji" title="Menu admin secret">üß†</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAAc2r6FQw66MrkUNmfEhw_RQq2gqJmb_o",
    authDomain: "stealthebrainrot-fortnite.firebaseapp.com",
    projectId: "stealthebrainrot-fortnite",
    storageBucket: "stealthebrainrot-fortnite.firebasestorage.app",
    messagingSenderId: "1027380486749",
    appId: "1:1027380486749:web:da177abdbbd569947fa3b4",
    measurementId: "G-6L2XGK4282"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ---------------- COMMENTAIRES ----------------
  const commentsDiv = document.getElementById('comments');

  async function loadComments(){
    commentsDiv.innerHTML = '';
    const snapshot = await getDocs(collection(db,'comments'));
    snapshot.forEach(docu=>{
      const data = docu.data();
      const div = document.createElement('div'); div.className='comment';
      div.innerHTML = `<strong>${data.user}</strong> : ${data.msg}`;
      commentsDiv.appendChild(div);
    });
  }

  async function addComment(){
    const user=document.getElementById('username').value.trim();
    const msg=document.getElementById('message').value.trim();
    if(!user||!msg){alert('Remplis pseudo et message !'); return;}
    await addDoc(collection(db,'comments'),{user,msg});
    document.getElementById('username').value='';
    document.getElementById('message').value='';
    loadComments();
  }

  loadComments();

  // ---------------- ADMIN ----------------
  const brainrot = document.getElementById('brainrot-emoji');
  const adminDiv = document.getElementById('adminLogin');

  function openAdmin(){
    const code=prompt("Code admin :");
    if(code==='2711'){
      adminDiv.style.display='block';
      loadAdminComments();
      renderAnnonces();
    } else alert('Code incorrect !');
  }

  brainrot.addEventListener('click', openAdmin);
  document.addEventListener('keydown', (e)=>{
    if(e.key==='a' && e.ctrlKey){ openAdmin(); }
  });

  async function loadAdminComments(){
    const div=document.getElementById('adminComments'); div.innerHTML='';
    const snapshot = await getDocs(collection(db,'adminNotes'));
    snapshot.forEach((docu)=>{
      const d = document.createElement('div'); d.className='comment';
      d.innerHTML = docu.data().msg;
      const del=document.createElement('button'); del.className='delete-btn'; del.textContent='Supprimer';
      del.onclick = async ()=>{
        await deleteDoc(doc(db,'adminNotes',docu.id));
        loadAdminComments();
      }
      d.appendChild(del);
      div.appendChild(d);
    });
  }

  // ---------------- ANNONCES ----------------
  async function renderAnnonces(){
    const annDiv=document.getElementById('annoncesDiv');
    annDiv.innerHTML='<h3>Historique des annonces</h3>';
    const snapshot = await getDocs(collection(db,'annonces'));
    snapshot.forEach(docu=>{
      const data = docu.data();
      const box=document.createElement('div'); box.className='annonce';
      box.innerHTML=`<strong>Admin ‚Äî ${data.titre}</strong><br>${data.msg}`;
      annDiv.appendChild(box);
    });
  }

  document.getElementById('publishAnnonce').addEventListener('click', async ()=>{
    const t=document.getElementById('annTitle').value.trim();
    const m=document.getElementById('annMsg').value.trim();
    let c=parseInt(document.getElementById('annCountdown').value);
    if(!t||!m){alert('Titre et message obligatoires'); return;}
    if(isNaN(c)||c<0) c=0;
    await addDoc(collection(db,'annonces'),{titre:t,msg:m,countdown:c});
    document.getElementById('annTitle').value='';
    document.getElementById('annMsg').value='';
    document.getElementById('annCountdown').value='';
    renderAnnonces();
  });
</script>
</body>
</html>
